<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Cucumber-JVM &amp; Selenium WebDirver in BDD | &#39;博&#39;_客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="TDD现在已经在各种开发团队中进行了很好地开展，但是对于测试和需求方，直接面向代码不是那么现实的本文用given-when-then的理念介绍如何使用使用cucumber-jvm和selenium webdriver对你的web项目进行BDD">
<meta property="og:type" content="article">
<meta property="og:title" content="Cucumber-JVM & Selenium WebDirver in BDD">
<meta property="og:url" content="http://marvin.github.io/cucumber-jvm-brief-intro/">
<meta property="og:site_name" content="'博'_客">
<meta property="og:description" content="TDD现在已经在各种开发团队中进行了很好地开展，但是对于测试和需求方，直接面向代码不是那么现实的本文用given-when-then的理念介绍如何使用使用cucumber-jvm和selenium webdriver对你的web项目进行BDD">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cucumber-JVM & Selenium WebDirver in BDD">
<meta name="twitter:description" content="TDD现在已经在各种开发团队中进行了很好地开展，但是对于测试和需求方，直接面向代码不是那么现实的本文用given-when-then的理念介绍如何使用使用cucumber-jvm和selenium webdriver对你的web项目进行BDD">

  
    <link rel="alternative" href="/atom.xml" title="&#39;博&#39;_客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">

</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<div class="profilepic">
			<img src="/img/avatar.jpeg">
		</div>

		<hgroup>
		  <h1 class="header-author"><a href="/">Marvin Zhang</a></h1>
		</hgroup>

		
		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/archives">所有文章</a></li>
	        
				<li><a href="/tags/笔记">随笔</a></li>
	        
				<li><a href="/about">关于博主</a></li>
	        
			</ul>
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/ztbsuper" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/u/3205480660" title="weibo">weibo</a>
		        
					<a class="linkedin" target="_blank" href="http://lnkd.in/bKuMhtM" title="linkedin">linkedin</a>
		        
			</div>
		</nav>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay"></div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="/img/avatar.jpeg">
			</div>

			<hgroup>
			  <h1 class="header-author"><a href="/">Marvin Zhang</a></h1>
			</hgroup>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/tags/笔记">随笔</a></li>
		        
					<li><a href="/about">关于博主</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/ztbsuper" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/3205480660" title="weibo">weibo</a>
			        
						<a class="linkedin" target="_blank" href="http://lnkd.in/bKuMhtM" title="linkedin">linkedin</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <article id="post-cucumber-jvm-brief-intro" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/cucumber-jvm-brief-intro/" class="article-date">
  	<time datetime="2014-09-22T06:21:49.000Z" itemprop="datePublished">Sep 22 2014</time>
</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BDD/">BDD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/test/">test</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/测试/">测试</a></li></ul>

    </div>
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Cucumber-JVM &amp; Selenium WebDirver in BDD
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>TDD现在已经在各种开发团队中进行了很好地开展，但是对于测试和需求方，直接面向代码不是那么现实的<br>本文用given-when-then的理念介绍如何使用使用cucumber-jvm和selenium webdriver对你的web项目进行BDD</p>
</blockquote>
<p><a id="more"></a></p>
<h1 id="目录"><h1 id="head">目录</h1>
<ol>
<li><a href="#tools_intro">工具和名词简介</a></li>
<li><a href="#create_project">工程准备</a></li>
<li><a href="#create_test_scenario">编写测试场景(用例)</a></li>
<li><a href="#implement_test">实现你的测试场景</a></li>
<li><a href="#implement_code">实现你的业务代码</a></li>
<li><a href="#run_in_webdriver">引入web driver</a></li>
<li><a href="#giveup_gui">扔掉GUI</a></li>
<li><a href="#summary">总结和引申</a></li>
</ol>
<hr>
<h1 id="工具和名词简介"><h1 id="tools_intro">工具和名词简介</h1></h1>
<h2 id="BDD">BDD</h2>
<p><a href="http://en.wikipedia.org/wiki/Behavior-driven_development" target="_blank" rel="external">Behavior Driven Development</a>，行为驱动开发，简称BDD<br>相对与<a href="http://en.wikipedia.org/wiki/Test-driven_development" target="_blank" rel="external">TDD</a>来说，BDD需要更加关注用户行为，对用户行为进行测试。在敏捷开发团队中，使用BDD的方式可以与业务人员更好地沟通</p>
<h2 id="Cucumber">Cucumber</h2>
<p><a href="http://cukes.info" target="_blank" rel="external">cucumber</a>是用于管理BDD用例的框架，本身采用ruby编写，本篇采用cucumber-jvm作为示例</p>
<h2 id="Selenium_WebDriver">Selenium WebDriver</h2>
<p><a href="http://www.seleniumhq.org/" target="_blank" rel="external">Selenium WebDriver</a>是用来自动化执行用例的，web driver是一个接口，可以通过实现web driver进行很多客户端执行，例如本文中将会提到firefox接口和phantomjs接口，同时还有android和IOS的实现</p>
<h2 id="PhantomJS">PhantomJS</h2>
<p><a href="http://phantomjs.org/" target="_blank" rel="external">PhantomJS</a>是nodejs编写的一个webkit执行器，可以对URL进行解析渲染，并支持保存成图片，可以通过npm进行安装，也可以通过二进制包下载安装</p>
<h2 id="Gradle">Gradle</h2>
<p><a href="http://www.gradle.org/" target="_blank" rel="external">gradle</a> 是java构建工具，采用groovy编写，相比于maven它更灵活，把maven冗长的xml配置变成了精简的代码</p>
<hr>
<h1 id="工程准备"><h1 id="create_project">工程准备</h1></h1>
<h2 id="工程依赖创建">工程依赖创建</h2>
<p>由于我们采用gradle来管理我们的java工程，并且使用IntelliJ Idea进行开发，所以我们只需要往build.gradle里面增加一些项目必须的东西就好了</p>
<blockquote>
<p>build.gradle </p>
</blockquote>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">apply plugin: <span class="string">'java'</span></div><div class="line">apply plugin: <span class="string">'idea'</span></div><div class="line"></div><div class="line"><span class="keyword">configurations</span> {</div><div class="line">    cucumberRuntime {</div><div class="line">        extendsFrom testRuntime</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line">testpackage = <span class="string">'homepage'</span></div><div class="line"></div><div class="line"><span class="keyword">task</span> cucumber() {</div><div class="line">    dependsOn assemble, compileTestJava</div><div class="line">    <span class="keyword">doLast</span> {</div><div class="line">        javaexec {</div><div class="line">            main = <span class="string">"cucumber.api.cli.Main"</span></div><div class="line">            <span class="keyword">classpath</span> = <span class="keyword">configurations</span>.cucumberRuntime + <span class="keyword">sourceSets</span>.main.output + <span class="keyword">sourceSets</span>.test.output</div><div class="line">            args = [<span class="string">'-f'</span>, <span class="string">'pretty'</span>, <span class="string">'--glue'</span>, testpackage, <span class="string">'src/test/resources'</span>]</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">dependencies</span> {</div><div class="line">    testCompile <span class="string">'info.cukes:cucumber-java:1.1.8'</span></div><div class="line">    testCompile <span class="string">'info.cukes:cucumber-junit:1.1.8'</span></div><div class="line"></div><div class="line">    testCompile <span class="string">'junit:junit:4.11'</span></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">repositories</span> {</div><div class="line">    mavenCentral()</div><div class="line">}</div></pre></td></tr></table></figure>

<p>把上面的 <em>testpackage</em> 变量名改成你的测试包名即可，剩下的就是在命令行上运行</p>
<blockquote>
<p>BASH</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gradle idea</div></pre></td></tr></table></figure>

<p>或者</p>
<blockquote>
<p>BASH</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./gradlew idea</div></pre></td></tr></table></figure>

<blockquote>
<p>这里体现了gradle的好处，就是可以把gradle wrapper放到版本控制里，那么如果遇到某台新的开发机没有gradle也没有关系，wrapper会帮你下载gradle</p>
</blockquote>
<p>最后，在follow一个java工程的各种路径创建的规则，我们创建出以下的工程</p>
<blockquote>
<p>吐槽一下酒店的网络，没法装tree，用find山寨了一个tree，src目录应该是以下的样子</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">CNtbzhang:cucumber tbzhang$ find ./src -print | sed <span class="operator">-e</span> <span class="string">'s;[^/]*/;|____;g;s;____|; |;g'</span></div><div class="line">|____src</div><div class="line">| |____main</div><div class="line">| | |____java</div><div class="line">| | |____resources</div><div class="line">| | |____webapp</div><div class="line">| | | |____META-INF</div><div class="line">| | | |____WEB-INF</div><div class="line">| | | | |____web.xml</div><div class="line">| |____test</div><div class="line">| | |____java</div><div class="line">| | | |____homepage</div><div class="line">| | |____resources</div><div class="line">| | | |____homepage</div></pre></td></tr></table></figure>

<hr>
<h1 id="编写测试场景(用例)"><h1 id="create_test_scenario">编写测试场景(用例)</h1></h1>
<h2 id="创建你的第一个feature(特性)">创建你的第一个feature(特性)</h2>
<p>在src/main/test/resources/homepage下面，我们创建第一个feature，我们的登陆就是一个feature，所以，我们写下了我们的第一个特性：登陆</p>
<blockquote>
<p>login.feature</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="constant">Feature</span><span class="symbol">:</span> <span class="constant">Login</span></div><div class="line">  提供正确的用户名和密码，应该返回登陆成功提示。 提供错误的用户名和密码，应该提示错误</div><div class="line"></div><div class="line">  <span class="constant">Scenario</span><span class="symbol">:</span> correct username & password</div><div class="line">    <span class="constant">Given</span> open the page </div><div class="line">    <span class="constant">And</span> set username </div><div class="line">    <span class="constant">And</span> set password</div><div class="line">    <span class="constant">When</span> <span class="constant">I</span> click login button      </div><div class="line">    <span class="constant">Then</span> <span class="constant">I</span> should get my username on the page</div></pre></td></tr></table></figure>

<p>看上去很简单是吧，就跟我们用人类可读的语言描述了一个场景一样： </p>
<blockquote>
<p>当 我给定 用户名 和 密码 的时候, 点击了 登陆按钮 , 我应该能从页面上获取到我的用户名</p>
</blockquote>
<p>看上去很美好，但是问题来了，我们需要多组数据支持怎么办？现在引入一个新的内容，在测试领域里应该叫’参数化’(其实就是变量)，我们改造一下：</p>
<blockquote>
<p>login.feature</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="constant">Feature</span><span class="symbol">:</span> <span class="constant">Login</span></div><div class="line">  提供正确的用户名和密码，应该返回登陆成功提示。 提供错误的用户名和密码，应该提示错误</div><div class="line"></div><div class="line">  <span class="constant">Scenario</span> <span class="constant">Outline</span><span class="symbol">:</span> correct username & password</div><div class="line">    <span class="constant">Given</span> open the page</div><div class="line">    <span class="constant">And</span> set username &lt;username&gt;</div><div class="line">    <span class="constant">And</span> set password &lt;password&gt;</div><div class="line">    <span class="constant">When</span> <span class="constant">I</span> click login button</div><div class="line">    <span class="constant">Then</span> <span class="constant">I</span> should get my username &lt;username&gt; on the page</div><div class="line"></div><div class="line">    <span class="constant">Examples</span><span class="symbol">:</span></div><div class="line">      |username|password|</div><div class="line">      |right|right|</div></pre></td></tr></table></figure>

<p>我们加上了Examples数据组，然后将其内容分别放到我们的测试场景中。</p>
<blockquote>
<p>注意！这里的是 Scenario Outline 而不再是 Scenario</p>
</blockquote>
<p>最后，加上另一个异常状况的用例，用于覆盖我们的需求</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="constant">Feature</span><span class="symbol">:</span> <span class="constant">Login</span></div><div class="line">  提供正确的用户名和密码，应该返回登陆成功提示。 提供错误的用户名和密码，应该提示错误</div><div class="line"></div><div class="line">  <span class="constant">Scenario</span> <span class="constant">Outline</span><span class="symbol">:</span> correct username & password</div><div class="line">    <span class="constant">Given</span> open the page</div><div class="line">    <span class="constant">And</span> set username &lt;username&gt;</div><div class="line">    <span class="constant">And</span> set password &lt;password&gt;</div><div class="line">    <span class="constant">When</span> <span class="constant">I</span> click login button</div><div class="line">    <span class="constant">Then</span> <span class="constant">I</span> should get my username &lt;username&gt; on the page</div><div class="line"></div><div class="line">    <span class="constant">Examples</span><span class="symbol">:</span></div><div class="line">      |username|password|</div><div class="line">      |right|right|</div><div class="line"></div><div class="line">  <span class="constant">Scenario</span> <span class="constant">Outline</span><span class="symbol">:</span> incorrect username & password</div><div class="line">    <span class="constant">Given</span> open the page</div><div class="line">    <span class="constant">And</span> set username &lt;username&gt;</div><div class="line">    <span class="constant">And</span> set password &lt;password&gt;</div><div class="line">    <span class="constant">When</span> <span class="constant">I</span> click login button</div><div class="line">    <span class="constant">Then</span> <span class="constant">I</span> should get login failed information on the page</div><div class="line"></div><div class="line">    <span class="constant">Examples</span><span class="symbol">:</span></div><div class="line">      |username|password|</div><div class="line">      |wrong|wrong|</div></pre></td></tr></table></figure>

<hr>
<h1 id="实现你的测试场景"><h1 id="implement_test">实现你的测试场景</h1></h1>
<p>手里已经有了测试用例，我们去实现自己的测试方法吧<br>在src/test/java/homepage下创建我们的测试步骤类，名字任意，跟jUnit代码累死，这里就不详细描述怎么编写了，直接看结果</p>
<blockquote>
<p>使用idea的cucumber插件的话，在feature文件上使用自动提示即可自动创建测试步骤类和方法，并且有非常友好的提示</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> homepage;</div><div class="line"></div><div class="line"><span class="keyword">import</span> cucumber.api.java.After;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.Before;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.And;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.Given;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.Then;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.When;</div><div class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</div><div class="line"><span class="keyword">import</span> org.openqa.selenium.firefox.FirefoxDriver;</div><div class="line"><span class="keyword">import</span> org.openqa.selenium.htmlunit.HtmlUnitDriver;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyStepDefine</span> </span>{</div><div class="line"></div><div class="line">    <span class="annotation">@Before</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setup</span>() {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@After</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teardown</span>() {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Given</span>(<span class="string">"^set username (.*)$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_username_username</span>(String username) <span class="keyword">throws</span> Throwable {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@And</span>(<span class="string">"^set password (.*)$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_password_password</span>(String password) <span class="keyword">throws</span> Throwable {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Then</span>(<span class="string">"^I should get my username (.*) on the page$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_should_get_my_username_username_on_the_page</span>(String username) <span class="keyword">throws</span> Throwable {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Then</span>(<span class="string">"^I should get login failed information on the page$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_should_get_login_failed_information_on_the_page</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@When</span>(<span class="string">"^I click login button$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_click_login_button</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Given</span>(<span class="string">"^open the page$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open_the_page</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">     </div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>是不是一下就理解作用原理了？对，就是通过正则表达式进行了各个条件的转换，使之能成为java代码运行。<br>这时候你可以运行 gradle cucumber(或者./gradlew cucumber，如果不想看gradle的日志，加上-q参数)，会在命令行上输出结果，不过我们现在暂时不去实现里面的测试细节。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">CNtbzhang:cucumber tbzhang$ ./gradlew -q cucumber</div><div class="line">Feature: Login</div><div class="line">  ??????????????????????? ??????????????????</div><div class="line"></div><div class="line">  Scenario Outline: correct username & password          <span class="comment"># homepage/login.feature:4</span></div><div class="line">    Given <span class="keyword">set</span> username &lt;username&gt;</div><div class="line">    And <span class="keyword">set</span> password &lt;password&gt;</div><div class="line">    When I click login button</div><div class="line">    Then I should get my username &lt;username&gt; on the page</div><div class="line"></div><div class="line">    Examples: </div><div class="line">use password : right</div><div class="line"></div><div class="line">  Scenario Outline: correct username & password     <span class="comment"># homepage/login.feature:12</span></div><div class="line">    Given <span class="keyword">set</span> username right                        <span class="comment"># MyStepDefine.set_username_username(String)</span></div><div class="line">    And <span class="keyword">set</span> password right                          <span class="comment"># MyStepDefine.set_password_password(String)</span></div><div class="line">    When I click login button                       <span class="comment"># MyStepDefine.I_click_login_button()</span></div><div class="line">    Then I should get my username right on the page <span class="comment"># MyStepDefine.I_should_get_my_username_username_on_the_page(String)</span></div><div class="line"></div><div class="line">  Scenario Outline: incorrect username & password          <span class="comment"># homepage/login.feature:14</span></div><div class="line">    Given <span class="keyword">set</span> username &lt;username&gt;</div><div class="line">    And <span class="keyword">set</span> password &lt;password&gt;</div><div class="line">    When I click login button</div><div class="line">    Then I should get login failed information on the page</div><div class="line"></div><div class="line">    Examples: </div><div class="line">use password : wrong</div><div class="line"></div><div class="line">  Scenario Outline: incorrect username & password          <span class="comment"># homepage/login.feature:22</span></div><div class="line">    Given <span class="keyword">set</span> username wrong                               <span class="comment"># MyStepDefine.set_username_username(String)</span></div><div class="line">    And <span class="keyword">set</span> password wrong                                 <span class="comment"># MyStepDefine.set_password_password(String)</span></div><div class="line">    When I click login button                              <span class="comment"># MyStepDefine.I_click_login_button()</span></div><div class="line">    Then I should get login failed information on the page <span class="comment"># MyStepDefine.I_should_get_login_failed_information_on_the_page()</span></div><div class="line"></div><div class="line"><span class="number">2</span> Scenarios (<span class="number">2</span> passed)</div><div class="line"><span class="number">8</span> Steps (<span class="number">8</span> passed)</div><div class="line"><span class="number">0</span>m0.<span class="number">076</span>s</div></pre></td></tr></table></figure>

<blockquote>
<p>场景的结果会输出成html形式的报告存放在build/cucumber-html-report下面，<br>代码层面的执行结果会存放在build/reports下面，<br>另外还有一个build/cucumber-report.json会提供本次测试的数据<br>因为命令行的字符集没设定，所以中文都是?，但是输出到report中的是正确的</p>
</blockquote>
<h1 id="实现你的业务代码"><h1 id="implement_code">实现你的业务代码</h1></h1>
<p>由于本篇是阐述BDD的driven，所以不会细节地讨论代码的编写，就用spring mvc简单做一个web应用就好，如果要看完整的代码，请移驾<a href="https://github.com/ztbsuper/cucumber-gradle" target="_blank" rel="external">github</a></p>
<blockquote>
<p>最终的代码目录</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">CNtbzhang:src tbzhang$ find ./main -print | sed <span class="operator">-e</span> <span class="string">'s;[^/]*/;|____;g;s;____|; |;g'</span>;</div><div class="line">|____main</div><div class="line">| |____java</div><div class="line">| | |____homepage</div><div class="line">| | | |____LoginController.java</div><div class="line">| | | |____LoginRequest.java</div><div class="line">| |____resources</div><div class="line">| |____webapp</div><div class="line">| | |____META-INF</div><div class="line">| | |____WEB-INF</div><div class="line">| | | |____dispatcher-servlet.xml</div><div class="line">| | | |____views</div><div class="line">| | | | |____failed.jsp</div><div class="line">| | | | |____index.jsp</div><div class="line">| | | | |____success.jsp</div><div class="line">| | | |____web.xml</div></pre></td></tr></table></figure>

<p>然后我们在gradle上执行jettyRun，就可以在本地调试了</p>
<blockquote>
<p>注意！gradle的jetty插件是6，支持的servlet版本是2.5的，对应spring的版本是3.X，如果你使用的spring 4+，请自己改写gradle jetty插件，否则会报某些方法找不到的错误</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">CNtbzhang:cucumber tbzhang$ ./gradlew  jettyRun</div><div class="line">Creating properties on demand (a.k.a. dynamic properties) has been deprecated and is scheduled to be removed <span class="keyword">in</span> Gradle <span class="number">2.0</span>. Please <span class="built_in">read</span> http://gradle.org/docs/current/dsl/org.gradle.api.plugins.ExtraPropertiesExtension.html <span class="keyword">for</span> information on the replacement <span class="keyword">for</span> dynamic properties.</div><div class="line">Deprecated dynamic property: <span class="string">"testpackage"</span> on <span class="string">"root project 'cucumber'"</span>, value: <span class="string">"homepage"</span>.</div><div class="line">:compileJava UP-TO-DATE                                      </div><div class="line">:processResources UP-TO-DATE  </div><div class="line">:classes UP-TO-DATE  </div><div class="line">&gt; Building &gt; :jettyRun &gt; Running at http://localhost:<span class="number">8080</span>/</div></pre></td></tr></table></figure>

<p>打开你的浏览器输入 <a href="http://localhost:8080/，一个简单的跳转页面就做好了" target="_blank" rel="external">http://localhost:8080/，一个简单的跳转页面就做好了</a></p>
<h1 id="引入web_driver"><h1 id="run_in_webdriver">引入web driver</h1></h1>
<p>现在我们的工程已经能运行，此时应当引入真正的自动化测试代码了。</p>
<blockquote>
<p>请查看我们最终的build.gradle，这里已经加入了seleniu webdriver的依赖了，在执行 ./gradlew idea后会把依赖都安装完成，此处就不多费键盘了。<br>接着我们来实现我们的测试步骤：</p>
</blockquote>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="constant">Given</span> open the page</div><div class="line"><span class="constant">And</span> set username &lt;username&gt;</div><div class="line"><span class="constant">And</span> set password &lt;password&gt;</div><div class="line"><span class="input"><span class="prompt">When I click login button</span></span></div><div class="line">Then I should get my username &lt;username&gt; on the page</div></pre></td></tr></table></figure>

<p>看来我们要实现 ‘open the page’，在这里就是打开浏览器，我们对MyStepDefine.java做一些修改，变成如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> homepage;</div><div class="line"></div><div class="line"><span class="keyword">import</span> cucumber.api.java.After;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.Before;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.And;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.Given;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.Then;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.When;</div><div class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</div><div class="line"><span class="keyword">import</span> org.openqa.selenium.firefox.FirefoxDriver;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyStepDefine</span> </span>{</div><div class="line">    <span class="keyword">private</span> WebDriver driver = <span class="keyword">new</span> FirefoxDriver();</div><div class="line">    <span class="annotation">@Before</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setup</span>() {</div><div class="line"></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@After</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teardown</span>() {</div><div class="line">        driver.close();</div><div class="line">        driver.quit();</div><div class="line">    }</div><div class="line"></div><div class="line"></div><div class="line">    <span class="annotation">@Given</span>(<span class="string">"^set username (.*)$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_username_username</span>(String username) <span class="keyword">throws</span> Throwable {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@And</span>(<span class="string">"^set password (.*)$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_password_password</span>(String password) <span class="keyword">throws</span> Throwable {</div><div class="line">        System.out.println(<span class="string">"use password : "</span> + password);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Then</span>(<span class="string">"^I should get my username (.*) on the page$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_should_get_my_username_username_on_the_page</span>(String username) <span class="keyword">throws</span> Throwable {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Then</span>(<span class="string">"^I should get login failed information on the page$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_should_get_login_failed_information_on_the_page</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@When</span>(<span class="string">"^I click login button$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_click_login_button</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Given</span>(<span class="string">"^open the page$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open_the_page</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">        driver.get(<span class="string">"http://localhost:8080"</span>);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<p>就像代码告诉我们的，我们在这个steps里有一个web driver，是fire fox的实例（当然你可以替换成chrome、safari、ie等，在selenium package中已经包括基本主流的浏览器）<br>然后通过</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="annotation">@Given</span>(<span class="string">"^open the page$"</span>)</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open_the_page</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">    driver.get(<span class="string">"http://localhost:8080"</span>);</div><div class="line">}</div></pre></td></tr></table></figure>

<p>告诉我们的firefox 浏览器：打开<a href="http://localhost:8080。" target="_blank" rel="external">http://localhost:8080。</a><br>接着我们执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./gradlew -q cucumber</div></pre></td></tr></table></figure>

<p>看到了么？你的浏览器一闪而过，实际上已经打开了本地的localhost:8080<br>太快了？那是因为程序比你手快太多了，程序已经告诉了ff把自己关掉，可以把</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="annotation">@After</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teardown</span>() {</div><div class="line">    driver.close();</div><div class="line">    driver.quit();</div><div class="line">}</div></pre></td></tr></table></figure>

<p>方法内容注释即可。</p>
<p>好了，接下来我们实现剩余的steps，由于是查API的工作，就不做赘述，直接看结果吧</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> homepage;</div><div class="line"></div><div class="line"><span class="keyword">import</span> cucumber.api.java.After;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.Before;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.And;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.Given;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.Then;</div><div class="line"><span class="keyword">import</span> cucumber.api.java.en.When;</div><div class="line"><span class="keyword">import</span> org.openqa.selenium.By;</div><div class="line"><span class="keyword">import</span> org.openqa.selenium.WebDriver;</div><div class="line"><span class="keyword">import</span> org.openqa.selenium.firefox.FirefoxDriver;</div><div class="line"></div><div class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.thoughtworks.selenium.SeleneseTestBase.assertTrue;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyStepDefine</span> </span>{</div><div class="line">    <span class="keyword">private</span> WebDriver driver = <span class="keyword">new</span> FirefoxDriver();</div><div class="line"></div><div class="line">    <span class="annotation">@Before</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setup</span>() {</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@After</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">teardown</span>() {</div><div class="line">        driver.close();</div><div class="line">        driver.quit();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Given</span>(<span class="string">"^set username (.*)$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_username_username</span>(String username) <span class="keyword">throws</span> Throwable {</div><div class="line">         driver.findElement(By.name(<span class="string">"username"</span>)).sendKeys(username);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@And</span>(<span class="string">"^set password (.*)$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set_password_password</span>(String password) <span class="keyword">throws</span> Throwable {</div><div class="line">        driver.findElement(By.name(<span class="string">"password"</span>)).sendKeys(password);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Then</span>(<span class="string">"^I should get my username (.*) on the page$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_should_get_my_username_username_on_the_page</span>(String username) <span class="keyword">throws</span> Throwable {</div><div class="line">        assertTrue(driver.findElement(By.id(<span class="string">"content"</span>)).getText().contains(<span class="string">"welcome, "</span> + username));</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Then</span>(<span class="string">"^I should get login failed information on the page$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_should_get_login_failed_information_on_the_page</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">        assertTrue(driver.findElement(By.id(<span class="string">"content"</span>)).getText().contains(<span class="string">"failed"</span>));</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@When</span>(<span class="string">"^I click login button$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_click_login_button</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">        driver.findElement(By.name(<span class="string">"submit"</span>)).click();</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="annotation">@Given</span>(<span class="string">"^open the page$"</span>)</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open_the_page</span>() <span class="keyword">throws</span> Throwable {</div><div class="line">        driver.get(<span class="string">"http://localhost:8080"</span>);</div><div class="line">    }</div><div class="line">}</div></pre></td></tr></table></figure>

<blockquote>
<p>可以看出，webdriver的实现基本上都是基于DOM的操作实现，这样可以非常方便地获取元素、执行事件</p>
</blockquote>
<p>coding结束，我们跑起来</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">CNtbzhang:cucumber tbzhang$ ./gradlew  -q cucumber</div><div class="line">Feature: Login</div><div class="line">  ??????????????????????? ??????????????????</div><div class="line"></div><div class="line">  Scenario Outline: correct username & password          <span class="comment"># homepage/login.feature:4</span></div><div class="line">    Given open the page</div><div class="line">    And <span class="keyword">set</span> username &lt;username&gt;</div><div class="line">    And <span class="keyword">set</span> password &lt;password&gt;</div><div class="line">    When I click login button</div><div class="line">    Then I should get my username &lt;username&gt; on the page</div><div class="line"></div><div class="line">    Examples: </div><div class="line"></div><div class="line">  Scenario Outline: correct username & password     <span class="comment"># homepage/login.feature:13</span></div><div class="line">    Given open the page                             <span class="comment"># MyStepDefine.open_the_page()</span></div><div class="line">    And <span class="keyword">set</span> username right                          <span class="comment"># MyStepDefine.set_username_username(String)</span></div><div class="line">    And <span class="keyword">set</span> password right                          <span class="comment"># MyStepDefine.set_password_password(String)</span></div><div class="line">    When I click login button                       <span class="comment"># MyStepDefine.I_click_login_button()</span></div><div class="line">    Then I should get my username right on the page <span class="comment"># MyStepDefine.I_should_get_my_username_username_on_the_page(String)</span></div><div class="line"></div><div class="line">  Scenario Outline: incorrect username & password          <span class="comment"># homepage/login.feature:15</span></div><div class="line">    Given open the page</div><div class="line">    And <span class="keyword">set</span> username &lt;username&gt;</div><div class="line">    And <span class="keyword">set</span> password &lt;password&gt;</div><div class="line">    When I click login button</div><div class="line">    Then I should get login failed information on the page</div><div class="line"></div><div class="line">    Examples: </div><div class="line"></div><div class="line">  Scenario Outline: incorrect username & password          <span class="comment"># homepage/login.feature:24</span></div><div class="line">    Given open the page                                    <span class="comment"># MyStepDefine.open_the_page()</span></div><div class="line">    And <span class="keyword">set</span> username wrong                                 <span class="comment"># MyStepDefine.set_username_username(String)</span></div><div class="line">    And <span class="keyword">set</span> password wrong                                 <span class="comment"># MyStepDefine.set_password_password(String)</span></div><div class="line">    When I click login button                              <span class="comment"># MyStepDefine.I_click_login_button()</span></div><div class="line">    Then I should get login failed information on the page <span class="comment"># MyStepDefine.I_should_get_login_failed_information_on_the_page()</span></div><div class="line"></div><div class="line"><span class="number">2</span> Scenarios (<span class="number">2</span> passed)</div><div class="line"><span class="number">10</span> Steps (<span class="number">10</span> passed)</div><div class="line"><span class="number">0</span>m4.<span class="number">407</span>s</div></pre></td></tr></table></figure>

<p>看上去是OK了，如果对代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="annotation">@Then</span>(<span class="string">"^I should get my username (.*) on the page$"</span>)</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">I_should_get_my_username_username_on_the_page</span>(String username) <span class="keyword">throws</span> Throwable {</div><div class="line">    assertTrue(driver.findElement(By.id(<span class="string">"content"</span>)).getText().contains(<span class="string">"welcome, "</span> + username));</div><div class="line">}</div></pre></td></tr></table></figure>

<p>我们改动一下期望值，那么执行就会提示有场景执行失败，此处就不做过多演示</p>
<p>@未完待续</p>
</h1>
      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Hello World</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="cucumber-jvm-brief-intro" data-title="Cucumber-JVM &amp; Selenium WebDirver in BDD" data-url="http://marvin.github.io/cucumber-jvm-brief-intro/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"ztbsuper"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2014 Marvin Zhang
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-39219562-3', 'auto');
    ga('send', 'pageview');

  </script>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


  </div>
</body>
</html>